# fn-8-7q5.1 Fix user domain orphaned references in V2 Xano

## Description

Clean up orphaned references in the user domain tables in V2 Xano workspace. The validation shows 7 relationships with orphans.

**Size:** M
**Files:** Xano workspace (V2), scripts/validation/validate-references.ts

## Orphans to Fix

| Table              | Column  | Orphans | Sample IDs |
| ------------------ | ------- | ------- | ---------- |
| user_credentials   | user_id | 82      | 34-43      |
| user_settings      | user_id | 89      | 30-39      |
| user_roles         | user_id | 23      | 27-40      |
| user_subscriptions | user_id | 82      | 23-32      |
| agent              | user_id | 94      | 470-479    |
| team_members       | user_id | 100     | 88-97      |
| network_user_prefs | user_id | 1       | 9          |

## Approach

1. Use Xano MCP to query each child table for orphaned records
2. For each orphan, decide: DELETE the orphan OR restore the parent
3. Execute cleanup via Xano MCP db operations
4. Re-run validate:references to confirm fix

## Key Context

- V2 workspace: `x2nu-xcjc-vhax.agentdashboards.xano.io` (Workspace 5)
- Use `mcp__xano-mcp__execute` with `dbQuery` and `dbDelete` operations
- Prefer DELETE for orphans unless they represent real data

## Acceptance

- [ ] All 7 user domain references pass validation
- [ ] No data loss of legitimate records
- [ ] Re-run `pnpm validate:references` shows user domain at 100%

## Done summary

TBD

## Evidence

- Commits:
- Tests:
- PRs:
