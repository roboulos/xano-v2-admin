# fn-8-7q5.3 Fix team and transaction orphaned references in V2 Xano

## Description

Clean up orphaned references in team and transaction domain tables in V2 Xano.

**Size:** M
**Files:** Xano workspace (V2), scripts/validation/validate-references.ts

## Orphans to Fix

### Team Domain (4 relationships)

| Table                     | Column  | Orphans | Sample IDs     |
| ------------------------- | ------- | ------- | -------------- |
| user                      | team_id | 18      | 73-79, 583-586 |
| team_members              | team_id | 8       | 91-148         |
| team_settings             | team_id | 11      | 2-11           |
| team_director_assignments | team_id | 1       | 1              |

### Transaction Domain (5 relationships)

| Table                  | Column         | Orphans | Notes                   |
| ---------------------- | -------------- | ------- | ----------------------- |
| transaction_financials | transaction_id | TBD     | Check validation output |
| (others)               |                |         | From validation output  |

### Brokerage Domain (1 relationship)

| Table             | Column         | Status             |
| ----------------- | -------------- | ------------------ |
| user.brokerage_id | → brokerage.id | ✅ Already passing |

## Approach

1. Query orphaned records in each table
2. Delete orphans - these are stale references from development
3. Run validation after each domain to confirm

## Acceptance

- [ ] All 4 team domain references pass validation
- [ ] All transaction domain references pass validation
- [ ] Re-run `pnpm validate:references` shows team+transaction at 100%

## Done summary

TBD

## Evidence

- Commits:
- Tests:
- PRs:
