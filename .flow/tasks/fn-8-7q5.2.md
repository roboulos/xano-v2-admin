# fn-8-7q5.2 Fix agent domain orphaned references in V2 Xano

## Description

Clean up orphaned references in the agent domain tables in V2 Xano workspace.

**Size:** M
**Files:** Xano workspace (V2), scripts/validation/validate-references.ts

## Orphans to Fix

| Table             | Column                     | Orphans | Sample IDs         |
| ----------------- | -------------------------- | ------- | ------------------ |
| agent_cap_data    | agent_id                   | 2       | 62, 63             |
| agent_commission  | agent_id                   | 99      | 38-47              |
| agent_hierarchy   | agent_id                   | 12      | 47-56              |
| agent_performance | agent_id                   | 95      | 38-47              |
| user              | agent_id                   | 10      | 60-71              |
| transaction       | transaction_owner_agent_id | 1       | 48671              |
| income            | agent_id                   | 95      | 6-15               |
| contribution      | agent_id                   | 0       | âœ… Already passing |

## Approach

1. Use Xano MCP to identify orphaned agent records
2. Delete orphans (agent domain is reference data)
3. Special case: user.agent_id=60 is the test user - verify before changes
4. Re-run validate:references to confirm

## Key Context

- User 60 (David Keener) is the verified test user - preserve this relationship
- contribution.agent_id already passes - don't modify

## Acceptance

- [ ] All 8 agent domain references pass validation
- [ ] User 60 relationship preserved
- [ ] Re-run `pnpm validate:references` shows agent domain at 100%

## Done summary

TBD

## Evidence

- Commits:
- Tests:
- PRs:
